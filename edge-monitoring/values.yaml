# Edge 监控套件配置
# 可选择性安装 Prometheus/Grafana/AlertManager

# 全局配置
global:
  # 是否启用监控套件
  enabled: true
  # 命名空间
  namespace: observability-system
  # 镜像仓库地址（可通过 Helm 参数覆盖）
  # imageRegistry: quanzhenglong.com

# Monitoring Service 配置 - 提供统一的监控数据 API
monitoringService:
  enabled: true
  replicas: 1
  image:
    registry: "quanzhenglong.com"  # 留空则使用 global.imageRegistry
    repository: edge/monitoring-service
    tag: main
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 9083
    targetPort: 9083

  # 资源限制
  resources:
    requests:
      memory: "100Mi"
      cpu: "50m"
    limits:
      memory: "400Mi"
      cpu: "200m"

# ServiceMonitor 配置 - 自动发现服务
serviceMonitor:
  enabled: false
  # 为 edge 组件创建 ServiceMonitor
  targets:
    - name: edge-apiserver
      service: edge-apiserver
      port: metrics
      path: /metrics
    - name: edge-controller
      service: edge-controller
      port: metrics
      path: /metrics

# Duty Service ReverseProxy 配置
dutyProxy:
  enabled: true
  upstream:
    scheme: http
    host: 116.63.161.198
    port: 30001