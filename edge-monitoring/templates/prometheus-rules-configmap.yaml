{{- if and .Values.global.enabled .Values.prometheus.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: edge-prometheus-rules
  namespace: {{ .Values.global.namespace }}
  labels:
    app: edge-prometheus
    component: prometheus-rules
data:
  # ========================================================================
  # Modularized Recording Rules - Combined from 7 PrometheusRule files
  # Source: Extracted and combined from edge-monitoring/rules/
  # - node-recording-rules.yaml (P1 - 4 groups)
  # - gpu-recording-rules.yaml (P1 - 2 groups)
  # - nodegroup-recording-rules.yaml (P2 - 1 group)
  # - cluster-recording-rules.yaml (P2 - 6 groups)
  # - workspace-recording-rules.yaml (P2 - 1 group)
  # - namespace-recording-rules.yaml (P2 - 1 group)
  # - npu-recording-rules.yaml (NPU Exporter - 2 groups)
  # Total: 17 rule groups
  # Last Updated: 2025-12-24
  # ========================================================================
  recording-rules.yaml: |
{{ .Files.Get "recording-rules-combined.yaml" | indent 4 }}
{{- end }}
