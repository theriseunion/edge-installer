apiVersion: installer.theriseunion.io/v1alpha1
kind: Component
metadata:
  name: edge-monitoring
spec:
  componentType: monitoring
  namespace: observability-system
  releaseName: monitoring
  chartPath: /Users/neov/src/github.com/edgekeel/apiserver/edge-installer/edge-monitoring
  values:
    global:
      enabled: true
      namespace: observability-system
      imageRegistry: quanzhenglong.com/edge
    prometheus:
      enabled: true
      image:
        name: prometheus
        tag: v2.45.0
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 9090
      persistence:
        enabled: false
      resources:
        requests:
          memory: "512Mi"
          cpu: "250m"
        limits:
          memory: "1Gi"
          cpu: "500m"
    grafana:
      enabled: true
      image:
        name: grafana
        tag: 10.0.0
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 3000
      adminPassword: admin123
      persistence:
        enabled: false
      resources:
        requests:
          memory: "256Mi"
          cpu: "100m"
        limits:
          memory: "512Mi"
          cpu: "200m"
    alertmanager:
      enabled: true
      image:
        name: alertmanager
        tag: v0.25.0
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 9093
      resources:
        requests:
          memory: "64Mi"
          cpu: "50m"
        limits:
          memory: "128Mi"
          cpu: "100m"
    kubeStateMetrics:
      enabled: true
      image:
        name: kube-state-metrics
        tag: v2.10.0
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 8080
      resources:
        requests:
          memory: "64Mi"
          cpu: "50m"
        limits:
          memory: "128Mi"
          cpu: "100m"
    nodeExporter:
      enabled: true
      image:
        name: node-exporter
        tag: v1.6.0
        pullPolicy: IfNotPresent
      hostNetwork: true
      hostPID: true
      service:
        type: ClusterIP
        port: 9100
      resources:
        requests:
          memory: "32Mi"
          cpu: "25m"
        limits:
          memory: "64Mi"
          cpu: "50m"
    cadvisor:
      enabled: true
      image:
        name: cadvisor
        tag: v0.47.0
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 8080
      resources:
        requests:
          memory: "200Mi"
          cpu: "150m"
        limits:
          memory: "400Mi"
          cpu: "300m"
    monitoringService:
      enabled: true
      replicas: 1
      image:
        repository: quanzhenglong.com/edge/monitoring-service
        tag: openapi-v1.1
        pullPolicy: IfNotPresent
      service:
        type: ClusterIP
        port: 9083
        targetPort: 9083
      resources:
        requests:
          memory: "100Mi"
          cpu: "50m"
        limits:
          memory: "400Mi"
          cpu: "200m"
