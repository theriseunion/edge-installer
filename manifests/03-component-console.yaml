apiVersion: installer.theriseunion.io/v1alpha1
kind: Component
metadata:
  name: edge-console
spec:
  componentType: console
  namespace: edge-system
  releaseName: console
  chartPath: /Users/neov/src/github.com/edgekeel/apiserver/edge-installer/edge-console
  values:
    replicaCount: 1
    fullnameOverride: "console"
    image:
      repository: quanzhenglong.com/edge/console
      pullPolicy: IfNotPresent
      tag: "main"
    serviceAccount:
      create: true
      automount: true
    service:
      type: NodePort
      port: 3000
      targetPort: 3000
      nodePort: 30880
    ingress:
      enabled: true
      className: ""
      annotations:
        kubernetes.io/ingress.class: nginx
        nginx.ingress.kubernetes.io/rewrite-target: /
      hosts:
        - host: edge-console.local
          paths:
            - path: /
              pathType: Prefix
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi
    edge:
      console:
        port: 3000
        apiServerUrl: "http://apiserver:8080"
        logLevel: info
        nodeEnv: production
    env:
      - name: NODE_ENV
        value: "production"
      - name: NEXT_PUBLIC_API_BASE_URL
        value: "http://apiserver:8080"
      - name: PORT
        value: "3000"
