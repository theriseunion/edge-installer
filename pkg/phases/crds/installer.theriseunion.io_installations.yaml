---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: installations.installer.theriseunion.io
spec:
  group: installer.theriseunion.io
  names:
    kind: Installation
    listKind: InstallationList
    plural: installations
    singular: installation
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .spec.version
      name: Version
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Installation is the Schema for the installations API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: InstallationSpec defines the desired state of Installation
            properties:
              components:
                description: Components configuration
                properties:
                  apiserver:
                    description: APIServer configuration
                    properties:
                      enabled:
                        description: Enabled indicates if the component should be
                          installed
                        type: boolean
                      image:
                        description: Image configuration
                        properties:
                          pullPolicy:
                            description: PullPolicy is the image pull policy
                            type: string
                          repository:
                            description: Repository is the image repository
                            type: string
                          tag:
                            description: Tag is the image tag
                            type: string
                        type: object
                      replicas:
                        description: Replicas is the number of replicas for the component
                        format: int32
                        type: integer
                      resources:
                        description: Resources configuration
                        properties:
                          claims:
                            description: |-
                              Claims lists the names of resources, defined in spec.resourceClaims,
                              that are used by this container.

                              This is an alpha field and requires enabling the
                              DynamicResourceAllocation feature gate.

                              This field is immutable. It can only be set for containers.
                            items:
                              description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                              properties:
                                name:
                                  description: |-
                                    Name must match the name of one entry in pod.spec.resourceClaims of
                                    the Pod where this field is used. It makes that resource available
                                    inside a container.
                                  type: string
                                request:
                                  description: |-
                                    Request is the name chosen for a request in the referenced claim.
                                    If empty, everything from the claim is made available, otherwise
                                    only the result of this request.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Limits describes the maximum amount of compute resources allowed.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Requests describes the minimum amount of compute resources required.
                              If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                              otherwise to an implementation-defined value. Requests cannot exceed Limits.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                        type: object
                      values:
                        description: Additional values for Helm chart
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    required:
                    - enabled
                    type: object
                  console:
                    description: Console configuration
                    properties:
                      enabled:
                        description: Enabled indicates if the component should be
                          installed
                        type: boolean
                      image:
                        description: Image configuration
                        properties:
                          pullPolicy:
                            description: PullPolicy is the image pull policy
                            type: string
                          repository:
                            description: Repository is the image repository
                            type: string
                          tag:
                            description: Tag is the image tag
                            type: string
                        type: object
                      ingress:
                        description: Ingress configuration
                        properties:
                          enabled:
                            description: Enabled indicates if Ingress should be created
                            type: boolean
                          host:
                            description: Host is the Ingress hostname
                            type: string
                          tls:
                            description: TLS configuration
                            type: boolean
                        required:
                        - enabled
                        type: object
                      replicas:
                        description: Replicas is the number of replicas for the component
                        format: int32
                        type: integer
                      resources:
                        description: Resources configuration
                        properties:
                          claims:
                            description: |-
                              Claims lists the names of resources, defined in spec.resourceClaims,
                              that are used by this container.

                              This is an alpha field and requires enabling the
                              DynamicResourceAllocation feature gate.

                              This field is immutable. It can only be set for containers.
                            items:
                              description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                              properties:
                                name:
                                  description: |-
                                    Name must match the name of one entry in pod.spec.resourceClaims of
                                    the Pod where this field is used. It makes that resource available
                                    inside a container.
                                  type: string
                                request:
                                  description: |-
                                    Request is the name chosen for a request in the referenced claim.
                                    If empty, everything from the claim is made available, otherwise
                                    only the result of this request.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Limits describes the maximum amount of compute resources allowed.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Requests describes the minimum amount of compute resources required.
                              If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                              otherwise to an implementation-defined value. Requests cannot exceed Limits.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                        type: object
                      values:
                        description: Additional values for Helm chart
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    required:
                    - enabled
                    type: object
                  controller:
                    description: Controller configuration
                    properties:
                      enableInit:
                        description: EnableInit enables automatic cluster initialization
                        type: boolean
                      enabled:
                        description: Enabled indicates if the component should be
                          installed
                        type: boolean
                      image:
                        description: Image configuration
                        properties:
                          pullPolicy:
                            description: PullPolicy is the image pull policy
                            type: string
                          repository:
                            description: Repository is the image repository
                            type: string
                          tag:
                            description: Tag is the image tag
                            type: string
                        type: object
                      replicas:
                        description: Replicas is the number of replicas for the component
                        format: int32
                        type: integer
                      resources:
                        description: Resources configuration
                        properties:
                          claims:
                            description: |-
                              Claims lists the names of resources, defined in spec.resourceClaims,
                              that are used by this container.

                              This is an alpha field and requires enabling the
                              DynamicResourceAllocation feature gate.

                              This field is immutable. It can only be set for containers.
                            items:
                              description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                              properties:
                                name:
                                  description: |-
                                    Name must match the name of one entry in pod.spec.resourceClaims of
                                    the Pod where this field is used. It makes that resource available
                                    inside a container.
                                  type: string
                                request:
                                  description: |-
                                    Request is the name chosen for a request in the referenced claim.
                                    If empty, everything from the claim is made available, otherwise
                                    only the result of this request.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Limits describes the maximum amount of compute resources allowed.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Requests describes the minimum amount of compute resources required.
                              If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                              otherwise to an implementation-defined value. Requests cannot exceed Limits.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                            type: object
                        type: object
                      values:
                        description: Additional values for Helm chart
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    required:
                    - enabled
                    type: object
                  monitoring:
                    description: Monitoring configuration
                    properties:
                      enabled:
                        description: Enabled indicates if monitoring should be installed
                        type: boolean
                      grafana:
                        description: Grafana configuration
                        properties:
                          enabled:
                            description: Enabled indicates if Grafana should be installed
                            type: boolean
                        required:
                        - enabled
                        type: object
                      prometheus:
                        description: Prometheus configuration
                        properties:
                          enabled:
                            description: Enabled indicates if Prometheus should be
                              installed
                            type: boolean
                          retention:
                            description: Retention period
                            type: string
                        required:
                        - enabled
                        type: object
                    required:
                    - enabled
                    type: object
                type: object
              initialization:
                description: Initialization configuration
                properties:
                  clusterName:
                    description: ClusterName is the name of the host cluster
                    type: string
                  enabled:
                    description: Enabled indicates if cluster initialization should
                      be performed
                    type: boolean
                  systemNamespaces:
                    description: SystemNamespaces are the namespaces to assign to
                      system workspace
                    items:
                      type: string
                    type: array
                  systemWorkspace:
                    description: SystemWorkspace is the name of the system workspace
                    type: string
                required:
                - enabled
                type: object
              version:
                description: Version is the version of Edge Platform to install
                type: string
            required:
            - components
            - version
            type: object
          status:
            description: InstallationStatus defines the observed state of Installation
            properties:
              completionTime:
                description: CompletionTime is the time the installation completed
                format: date-time
                type: string
              components:
                description: Components status
                properties:
                  apiserver:
                    description: APIServer status
                    properties:
                      helmRelease:
                        description: HelmRelease name
                        type: string
                      installed:
                        description: Installed indicates if the component is installed
                        type: boolean
                      message:
                        description: Message provides additional status information
                        type: string
                      ready:
                        description: Ready indicates if the component is ready
                        type: boolean
                      version:
                        description: Version of the installed component
                        type: string
                    required:
                    - installed
                    - ready
                    type: object
                  console:
                    description: Console status
                    properties:
                      helmRelease:
                        description: HelmRelease name
                        type: string
                      installed:
                        description: Installed indicates if the component is installed
                        type: boolean
                      message:
                        description: Message provides additional status information
                        type: string
                      ready:
                        description: Ready indicates if the component is ready
                        type: boolean
                      version:
                        description: Version of the installed component
                        type: string
                    required:
                    - installed
                    - ready
                    type: object
                  controller:
                    description: Controller status
                    properties:
                      helmRelease:
                        description: HelmRelease name
                        type: string
                      installed:
                        description: Installed indicates if the component is installed
                        type: boolean
                      message:
                        description: Message provides additional status information
                        type: string
                      ready:
                        description: Ready indicates if the component is ready
                        type: boolean
                      version:
                        description: Version of the installed component
                        type: string
                    required:
                    - installed
                    - ready
                    type: object
                  monitoring:
                    description: Monitoring status
                    properties:
                      helmRelease:
                        description: HelmRelease name
                        type: string
                      installed:
                        description: Installed indicates if the component is installed
                        type: boolean
                      message:
                        description: Message provides additional status information
                        type: string
                      ready:
                        description: Ready indicates if the component is ready
                        type: boolean
                      version:
                        description: Version of the installed component
                        type: string
                    required:
                    - installed
                    - ready
                    type: object
                type: object
              conditions:
                description: Conditions represent the latest available observations
                  of the installation state
                items:
                  description: InstallationCondition describes the state of an installation
                    at a certain point
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message indicating
                        details about the transition
                      type: string
                    reason:
                      description: Reason is a one-word CamelCase reason for the condition's
                        last transition
                      type: string
                    status:
                      description: 'Status of the condition: True, False, Unknown'
                      type: string
                    type:
                      description: Type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              currentPhase:
                description: CurrentPhase is a human-readable description of current
                  phase
                type: string
              message:
                description: Message provides additional information about the installation
                  state
                type: string
              phase:
                description: Phase is the current phase of the installation
                type: string
              startTime:
                description: StartTime is the time the installation started
                format: date-time
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
