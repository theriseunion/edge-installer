========================================
OpenYurt Configuration Installed
========================================

OpenYurt has been configured for Edge Platform.

Configuration Details:
  - API Server: {{ .Values.openyurt.apiServer.endpoint }}
  - Namespace: {{ .Values.namespace }}

ConfigMap Created:
  - {{ .Values.configMap.name }} (in {{ .Values.namespace }} namespace)

Next Steps:

1. Verify the ConfigMap was created:

   kubectl get configmap {{ .Values.configMap.name }} -n {{ .Values.namespace }}

   kubectl describe configmap {{ .Values.configMap.name }} -n {{ .Values.namespace }}

2. Configure edge-runtime via Web Console:

   - Access Web Console (e.g., http://localhost:3000)
   - Navigate to: Cluster Management → Select Cluster → Base Info
   - Find "Edge Runtime" field and click edit icon
   - Select "openyurt" and save

   Or use kubectl:

   kubectl annotate cluster host \
     cluster.theriseunion.io/edge-runtime=openyurt \
     --overwrite

3. Verify the configuration:

   kubectl get cluster host -o yaml | grep edge-runtime

4. Test join-token generation:

   curl "http://localhost:8080/oapis/infra.theriseunion.io/v1alpha1/join-token?nodeName=test-node"

   If successful, you'll receive the join command for edge nodes.

5. Add edge nodes using the generated join command.

For more information:
  - OpenYurt Setup Guide: ../OPENYURT-SETUP.md
  - Deployment Guide: ../DEPLOY.md

{{ if not .Values.openyurt.apiServer.endpoint }}
⚠️  WARNING: API Server endpoint is not configured!
   Please update values.yaml or use:
   helm upgrade {{ .Release.Name }} . --set openyurt.apiServer.endpoint=https://<your-api-server>:6443
{{ end }}
