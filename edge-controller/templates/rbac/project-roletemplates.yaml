apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/description: "Namespace 级基础权限"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
  name: project-basic
spec:
  uiPermissions:
    - project/basic.view
  rules:
  - apiGroups:
    - 'tenant.theriseunion.io'
    resources:
    - 'namespaces'
    - 'workspaces/namespaces'
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - resources.theriseunion.io
    resources:
    - resourcequotas
    verbs:
    - get
    - list
    - watch
  - nonResourceURLs:
      - /api/v1alpha1/events
    verbs:
      - get
      - list
      - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "应用部署查看"
    theriseunion.io/description: "允许查看当前项目下的应用部署"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-appdeployments
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-appdeployments
spec:
  uiPermissions:
    - project/appdeployments.view
  rules:
    - apiGroups:
      - app.theriseunion.io
      resources:
      - applicationdeployments
      - applicationversions
      verbs:
      - get
      - list
      - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "应用部署管理"
    theriseunion.io/description: "管理当前项目下的应用部署"
    iam.theriseunion.io/dependencies: "project-view-appdeployments"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-appdeployments
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
  name: project-manage-appdeployments
spec:
  uiPermissions:
    - project/appdeployments.manage
  rules:
    - apiGroups:
      - app.theriseunion.io
      resources:
      - applicationversions
      verbs:
      - get
      - list
      - watch
    - apiGroups:
      - infra.theriseunion.io
      resources:
      - nodegroups
      - namespaces/nodegroups
      verbs:
      - get
      - list
      - watch
    - apiGroups:
      - app.theriseunion.io
      resources:
      - applicationdeployments
      verbs:
      - '*'

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "应用负载查看"
    theriseunion.io/description: "允许查看当前项目下的应用负载资源"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-workload
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-workloads
spec:
  uiPermissions:
    - project/workloads.view
  rules:
    - apiGroups:
      - resources.theriseunion.io
      resources:
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - jobs
      - cronjobs
      - pods
      - pods/log
      - pods/containers
      - services
      - ingresses
      - router
      - horizontalpodautoscalers
      - configmaps
      - secrets
      verbs:
      - get
      - list
      - watch
    - apiGroups:
      - ''
      resources:
      - pods
      - pods/log
      verbs:
      - get
    - apiGroups:
      - device.vast.theriseunion.io
      resources:
      - devicemodels
      verbs:
      - get
      - list

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "应用负载管理"
    theriseunion.io/description: "管理当前项目下的应用负载"
    iam.theriseunion.io/dependencies: "project-view-workloads"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-workload
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
  name: project-manage-workloads
spec:
  uiPermissions:
    - project/workloads.manage
  rules:
    - apiGroups:
      - resources.theriseunion.io
      resources:
      - services
      - applications
      - controllerrevisions
      - deployments
      - replicasets
      - statefulsets
      - daemonsets
      - jobs
      - cronjobs
      - pods
      - pods/log
      - pods/containers
      - services
      - ingresses
      - router
      - horizontalpodautoscalers
      - configmaps
      - secrets
      verbs:
      - '*'
    - apiGroups:
      - terminal.theriseunion.io
      resources:
      - pods
      - pods/exec
      verbs:
      - get

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "镜像查看"
    theriseunion.io/description: "允许查看当前项目下的镜像"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/category: project-images
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-images
spec:
  uiPermissions:
    - project/images.view
  rules:
    - apiGroups:
        - image.theriseunion.io
      resources:
        - repositories
        - namespaces/repositories
        - registry-secrets
        - namespaces/registry-secrets
      verbs:
        - list
        - get
        - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "镜像管理"
    theriseunion.io/description: "允许管理当前项目下的镜像"
    iam.theriseunion.io/dependencies: "project-view-images"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/category: project-images
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
  name: project-manage-images
spec:
  uiPermissions:
    - project/images.manage
  rules:
    - apiGroups:
        - image.theriseunion.io
      resources:
        - repositories
        - namespaces/repositories
        - registry-secrets
        - namespaces/registry-secrets
      verbs:
        - '*'

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "持久卷查看"
    theriseunion.io/description: "允许查看持久卷相关信息"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/category: project-storage
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-pv
spec:
  uiPermissions:
    - project/pv.view
  rules:
    - apiGroups:
        - resources.theriseunion.io
      resources:
        - 'storageclasses'
        - 'persistentvolumes'
        - 'persistentvolumeclaims'
      verbs:
        - list
        - get
        - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "持久卷管理"
    theriseunion.io/description: "管理持久卷相关信息"
    iam.theriseunion.io/dependencies: "project-view-pv"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/category: project-storage
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
  name: project-manage-pv
spec:
  uiPermissions:
    - project/pv.manage
  rules:
    - apiGroups:
        - resources.theriseunion.io
      resources:
        - 'persistentvolumes'
        - 'persistentvolumeclaims'
      verbs:
        - "*"

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  name: project-view-configurations
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "配置查看"
    theriseunion.io/description: "查看当前项目里的配置资源"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-resource
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
spec:
  uiPermissions:
    - project/configurations.view
  rules:
  - apiGroups:
    - resources.theriseunion.io
    resources:
    - configmaps
    - secrets
    - serviceaccounts
    verbs:
    - get
    - list
    - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  name: project-manage-configurations
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "配置管理"
    theriseunion.io/description: "管理当前项目里的配置资源"
    iam.theriseunion.io/dependencies: "project-view-configurations"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-resource
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
spec:
  uiPermissions:
    - project/configurations.manage
  rules:
  - apiGroups:
    - resources.theriseunion.io
    resources:
    - configmaps
    - secrets
    - serviceaccounts
    verbs:
    - '*'

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  name: project-view-settings
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "项目设置查看"
    theriseunion.io/description: "允许查看当前项目的设置信息"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-settings
    iam.theriseunion.io/aggregate-to-admin: ''
    iam.theriseunion.io/aggregate-to-operator: ''
    iam.theriseunion.io/aggregate-to-viewer: ''
spec:
  uiPermissions:
    - project/settings.view
  rules:
  - apiGroups:
    - resources.theriseunion.io
    resources:
    - resourcequotas
    - limitranges
    verbs:
    - list
    - get

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  name: project-manage-settings
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "项目设置管理"
    theriseunion.io/description: "管理当前项目的设置信息"
    iam.theriseunion.io/dependencies: "project-view-settings"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-settings
    iam.theriseunion.io/aggregate-to-admin: ''
spec:
  uiPermissions:
    - project/settings.manage
  rules:
  - apiGroups:
    - tenant.theriseunion.io
    resources:
    - namespaces
    verbs:
    - '*'
  - apiGroups:
    - resources.theriseunion.io
    resources:
    - resourcequotas
    - limitranges
    verbs:
    - '*'

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "角色查看"
    theriseunion.io/description: "允许查看项目下角色"
    iam.theriseunion.io/dependencies: "project-basic"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-access-control
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-roles
spec:
  uiPermissions:
    - project/settings.view
    - project/roles.view
  rules:
  - apiGroups:
    - iam.theriseunion.io
    resources:
    - roles
    verbs:
    - get
    - list
    - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "角色管理"
    theriseunion.io/description: "管理项目下角色"
    iam.theriseunion.io/dependencies: "project-view-roles"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-access-control
    iam.theriseunion.io/aggregate-to-admin: ""
  name: project-manage-roles
spec:
  uiPermissions:
    - project/roles.manage
  rules:
  - apiGroups:
    - iam.theriseunion.io
    resources:
    - roles
    verbs:
    - '*'

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "成员查看"
    theriseunion.io/description: "允许查看项目下成员信息"
    iam.theriseunion.io/dependencies: "project-view-roles"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-access-control
    iam.theriseunion.io/aggregate-to-admin: ""
    iam.theriseunion.io/aggregate-to-operator: ""
    iam.theriseunion.io/aggregate-to-viewer: ""
  name: project-view-members
spec:
  uiPermissions:
    - project/members.view 
  rules:
  - apiGroups:
    - iam.theriseunion.io
    resources:
    - members
    - roles
    verbs:
    - get
    - list
    - watch

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: RoleTemplate
metadata:
  annotations:
    theriseunion.io/creator: system
    theriseunion.io/alias-name: "成员管理"
    theriseunion.io/description: "管理项目下所有成员"
    iam.theriseunion.io/dependencies: "project-view-members"
  labels:
    theriseunion.io/managed: 'true'
    iam.theriseunion.io/scope: namespace
    iam.theriseunion.io/category: project-access-control
    iam.theriseunion.io/aggregate-to-admin: ""
  name: project-manage-members
spec:
  uiPermissions:
    - project/members.manage
  rules:
  - apiGroups:
    - iam.theriseunion.io
    resources:
    - members
    verbs:
    - '*'
