{{- /*
  NodeGroup Default Role Templates
  These are built-in IAMRoles that serve as templates for nodegroup-scoped roles.

  Naming Convention (auto-generated by controller):
    Format: nodegroup-<name-prefix>-<name-hash>-<role-type>
    - scope: "nodegroup" (full scope name)
    - name-prefix: first 15 chars of resource name
    - name-hash: first 8 chars of SHA256(name) hex
    - role-type: admin/viewer
    Max length: 41 chars (nodegroup-{15}-{8}-viewer)

  Examples:
    NodeGroup "edge-beijing" → nodegroup-edge-beijing-7a3c5e2f-admin
    NodeGroup "production-cluster-nodegroup-for-gpu-workloads"
      → nodegroup-production-clus-b4d8f1a6-admin

  Note: The full "nodegroup-" prefix prevents naming conflicts with workspace/namespace roles.
        The hash suffix ensures uniqueness even when name-prefix is identical.
*/ -}}

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: nodegroup-admin
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "nodegroup"
    iam.theriseunion.io/role-type: "admin"
  annotations:
    iam.theriseunion.io/creator: "system"
    iam.theriseunion.io/display-name-en: "NodeGroup Administrator"
    iam.theriseunion.io/display-name-zh: "节点组管理员"
    iam.theriseunion.io/description-en: "Manage all nodes in the node group"
    iam.theriseunion.io/description-zh: "管理节点组中的所有节点"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-nodegroup-admin: "true"

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: nodegroup-viewer
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "nodegroup"
    iam.theriseunion.io/role-type: "viewer"
  annotations:
    iam.theriseunion.io/creator: "system"
    iam.theriseunion.io/display-name-en: "NodeGroup Viewer"
    iam.theriseunion.io/display-name-zh: "节点组查看者"
    iam.theriseunion.io/description-en: "View all nodes in the node group"
    iam.theriseunion.io/description-zh: "查看节点组中的所有节点"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-nodegroup-viewer: "true"
