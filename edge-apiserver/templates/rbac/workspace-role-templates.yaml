{{- /*
  Workspace Default Role Templates
  These are built-in IAMRoles that serve as templates for workspace-scoped roles.

  Naming Convention (auto-generated by controller):
    Format: workspace-<name-prefix>-<name-hash>-<role-type>
    - scope: "workspace" (full scope name)
    - name-prefix: first 15 chars of resource name
    - name-hash: first 8 chars of SHA256(name) hex
    - role-type: admin/viewer/regular/self-provisioner
    Max length: 53 chars (workspace-{15}-{8}-self-provisioner)

  Examples:
    Workspace "dev-team" → workspace-dev-team-9f86d081-admin
    Workspace "my-very-long-development-team-for-backend-microservices"
      → workspace-my-very-long-de-a3f5b2c1-admin

  Note: The full "workspace-" prefix prevents naming conflicts with nodegroup/namespace roles.
        The hash suffix ensures uniqueness even when name-prefix is identical.
*/ -}}

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: workspace-admin
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "workspace"
    iam.theriseunion.io/role-type: "admin"
  annotations:
    iam.theriseunion.io/creator: "system"
    theriseunion.io/alias-name: "workspace-admin"
    iam.theriseunion.io/display-name-en: "Workspace Administrator"
    iam.theriseunion.io/display-name-zh: "工作空间管理员"
    iam.theriseunion.io/description-en: "Manage all resources in the workspace"
    iam.theriseunion.io/description-zh: "管理工作空间中的所有资源"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-workspace-admin: "true"

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: workspace-viewer
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "workspace"
    iam.theriseunion.io/role-type: "viewer"
  annotations:
    iam.theriseunion.io/creator: "system"
    theriseunion.io/alias-name: "workspace-viewer"
    iam.theriseunion.io/display-name-en: "Workspace Viewer"
    iam.theriseunion.io/display-name-zh: "工作空间查看者"
    iam.theriseunion.io/description-en: "View all resources in the workspace"
    iam.theriseunion.io/description-zh: "查看工作空间中的所有资源"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-workspace-viewer: "true"

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: workspace-regular
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "workspace"
    iam.theriseunion.io/role-type: "regular"
  annotations:
    iam.theriseunion.io/creator: "system"
    theriseunion.io/alias-name: "workspace-regular"
    iam.theriseunion.io/display-name-en: "Workspace Regular User"
    iam.theriseunion.io/display-name-zh: "工作空间普通用户"
    iam.theriseunion.io/description-en: "View workspace settings"
    iam.theriseunion.io/description-zh: "查看工作空间设置"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-workspace-regular: "true"

---
apiVersion: iam.theriseunion.io/v1alpha1
kind: IAMRole
metadata:
  name: workspace-self-provisioner
  labels:
    iam.theriseunion.io/builtin: "true"
    iam.theriseunion.io/scope: "workspace"
    iam.theriseunion.io/role-type: "self-provisioner"
  annotations:
    iam.theriseunion.io/creator: "system"
    theriseunion.io/alias-name: "workspace-self-provisioner"
    iam.theriseunion.io/display-name-en: "Workspace Self Provisioner"
    iam.theriseunion.io/display-name-zh: "工作空间项目创建者"
    iam.theriseunion.io/description-en: "View workspace settings and create projects"
    iam.theriseunion.io/description-zh: "查看工作空间设置、创建项目"
spec:
  aggregationRoleTemplates:
    roleSelector:
      matchLabels:
        iam.theriseunion.io/aggregate-to-workspace-self-provisioner: "true"
